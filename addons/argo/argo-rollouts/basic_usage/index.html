
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Project documentation with Markdown." name="description"/>
<meta content="maehachi08" name="author"/>
<link href="https://maehachi08.github.io/k8s-study/addons/argo/argo-rollouts/basic_usage/" rel="canonical"/>
<link href="../install/" rel="prev"/>
<link href="../../../keda/about_keda/" rel="next"/>
<link href="../../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.1.0" name="generator"/>
<title>Basic Usage - maehachi08/k8s-study</title>
<link href="../../../../assets/stylesheets/main.402914a4.min.css" rel="stylesheet"/>
<link href="../../../../assets/stylesheets/palette.a0c5b2b5.min.css" rel="stylesheet"/>
<style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.484 4.484 0 0 1-.563-1.191 3.835 3.835 0 0 1-.05-2.063 4.647 4.647 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .748.748 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.425 2.425 0 0 1-.507-.441 3.075 3.075 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.884.884 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.737 3.737 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75Z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');}</style>
<script src="../../../../assets/pymdownx-extras/material-extra-theme-8d50d708.js" type="text/javascript"></script>
<script src="../../../../assets/pymdownx-extras/material-extra-3rdparty-a81e7739.js" type="text/javascript"></script>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../../assets/pymdownx-extras/extra-3531de4046.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#canary">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="" class="md-header__inner md-grid">
<a aria-label="maehachi08/k8s-study" class="md-header__button md-logo" href="https://maehachi08.github.io/k8s-study/" title="maehachi08/k8s-study">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            maehachi08/k8s-study
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Basic Usage
            
          </span>
</div>
</div>
</div>
<div class="md-header__options">
<div class="md-header-nav__scheme md-header-nav__button md-source__icon md-icon">
<a class="light-mode" href="javascript:toggleScheme();" title="Light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"></path></svg>
</a>
<a class="dark-mode" href="javascript:toggleScheme();" title="Dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"></path></svg>
</a>
<a class="system-mode" href="javascript:toggleScheme();" title="System preference">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07 19.07 3.5m-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13.51 1.67m-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87.4 1.31M19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35-2.53-2.2m4.33-2.7 1.15-2.77 2.2 2.54-3.35.23m1.15-4.96-1.14-2.78 3.34.24-2.2 2.54M9.63 18.93l2.77 1.15-2.53 2.19-.24-3.34Z"></path></svg>
</a>
<a class="unknown-mode" href="javascript:toggleScheme();" title="Unknown scheme">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m15.07 11.25-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2 2 2 0 0 0-2 2H8a4 4 0 0 1 4-4 4 4 0 0 1 4 4 3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10Z"></path></svg>
</a>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/maehachi08/k8s-study" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="maehachi08/k8s-study" class="md-nav__button md-logo" data-md-component="logo" href="../../../.." title="maehachi08/k8s-study">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    maehachi08/k8s-study
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/maehachi08/k8s-study" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../..">
        Home
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../container-runtime/">
        Container Runtime
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Kubernetes
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Kubernetes
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          Architecture
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
          Architecture
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../kubernetes/architecture/garbage-collection/">
        Garbage Collection
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Setup
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Setup
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/01_setup_RaspberryPi/">
        01. Raspberry Pi 構成
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/02_setup_ubuntu20-04-LTS/">
        02. OS Install
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/03_common_settings/">
        03. master/nodeで共通手順
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/04_creation_certificate/">
        04. 認証局の設定とTLS証明書の作成
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/05_creating_config/">
        05. 認証のためのkubeconfigの作成
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
          06. master node
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_6">
<span class="md-nav__icon md-icon"></span>
          06. master node
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/06_master/01_bootstrapping_kubelet/">
        01. bootstrapping kubelet
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/06_master/02_bootstrapping_etcd/">
        02. bootstrapping etcd
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/06_master/03_bootstrapping_kube-apiserver/">
        03. bootstrapping kube-apiserver
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/06_master/04_bootstrapping_kube-controller-manager/">
        04. bootstrapping kube-controller-manager
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/06_master/05_bootstrapping_kube-scheduler/">
        05. bootstrapping kube-scheduler
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/06_master/06_configuration_rbac_to_access_from-apiserver-to-kubelet/">
        06. kube-apiserver から kubelet へのアクセス権を設定する
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/06_master/07_controller_health_check/">
        07. Kubernetes API のヘルスチェック
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
          07. worker node
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_7">
<span class="md-nav__icon md-icon"></span>
          07. worker node
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/07_worker/01_bootstrapping_kubelet/">
        01. bootstrapping kubelet
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/07_worker/02_bootstrapping_kube-proxy/">
        02. bootstrapping kube-proxy
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/08_flannel/bootstrapping_flannel/">
        08. bootstrapping flannel
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/09_coredns/bootstrapping_coredns/">
        09. bootstrapping coredns
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/10_nginx_ingress_controller/bootstrapping_nginx_ingress_controller/">
        10. bootstrapping nginx ingress controller
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../setup/11_external_dns/bootstrapping_external_dns/">
        11. bootstrapping external-dns
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Monitoring
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          Monitoring
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../monitoring/metrics-server/bootstrapping_metrics_server/">
        bootstrapping metrics_server
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../monitoring/kubernetes-dashboard/bootstrapping_kubernetes-dashboard/">
        bootstrapping kubernetes-dashboard
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
          Prometheus / Grafana
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_3">
<span class="md-nav__icon md-icon"></span>
          Prometheus / Grafana
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../monitoring/prometheus/install_prometheus/">
        Install Prometheus
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../monitoring/prometheus/install_grafana/">
        Install Grafana
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../monitoring/prometheus/install_cadvisor/">
        Install cadvisor
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Addons
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Addons
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../metallb/">
        MetalLB
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
          OpenEBS
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_2">
<span class="md-nav__icon md-icon"></span>
          OpenEBS
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../openebs/about/">
        About OpenEBS
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../openebs/install/">
        Installing OpenEBS
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_6_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
          Argo
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_6_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_3">
<span class="md-nav__icon md-icon"></span>
          Argo
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_6_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_3_1" id="__nav_6_3_1_label" tabindex="0">
          Argo Rollouts
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_6_3_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_6_3_1">
<span class="md-nav__icon md-icon"></span>
          Argo Rollouts
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../about/">
        About
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../traffic-management/">
        Traffic Management
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../install/">
        Install
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Basic Usage
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Basic Usage
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#canary">
    canary
  </a>
<nav aria-label="canary" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#manifests">
    manifests
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deploy">
    初回deploy
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2deploy">
    2回目のdeploy
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bluegreen">
    blue/green
  </a>
<nav aria-label="blue/green" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#manifests_1">
    manifests
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deploy_1">
    初回deploy
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2deploy_1">
    2回目のdeploy
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
          KEDA
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_4">
<span class="md-nav__icon md-icon"></span>
          KEDA
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../keda/about_keda/">
        About KEDA
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../keda/install/">
        Install KEDA
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../keda/fallback/">
        Fallback
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
          Kyverno
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_5">
<span class="md-nav__icon md-icon"></span>
          Kyverno
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../kyverno/about_kyverno/">
        About Kyverno
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../kyverno/installation_kyverno/">
        Installation Kyverno
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Cloud Native Buildpacks
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Cloud Native Buildpacks
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cloud-native-buildpacks/about/">
        About
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
          Paketo Buildpacks
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_2">
<span class="md-nav__icon md-icon"></span>
          Paketo Buildpacks
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cloud-native-buildpacks/paketo-buildpacks/ruby/">
        Ruby
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Operations
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
          Operations
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../operations/backup_etcd/">
        etcd
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          LoadTest
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
          LoadTest
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
          Locust
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_9_1">
<span class="md-nav__icon md-icon"></span>
          Locust
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../load_test/locust/about/">
        About
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
          Failure Test
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
          Failure Test
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../failure_test/failure_story/">
        Failure Story
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../failure_test/point_of_failure/">
        Point of failure
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_10_3" id="__nav_10_3_label" tabindex="0">
          Failure Scenario
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_10_3">
<span class="md-nav__icon md-icon"></span>
          Failure Scenario
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../failure_test/failure_scenario_of_node/">
        Node
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#canary">
    canary
  </a>
<nav aria-label="canary" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#manifests">
    manifests
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deploy">
    初回deploy
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2deploy">
    2回目のdeploy
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bluegreen">
    blue/green
  </a>
<nav aria-label="blue/green" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#manifests_1">
    manifests
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deploy_1">
    初回deploy
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2deploy_1">
    2回目のdeploy
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1>Basic Usage</h1>
<h3 id="canary">canary</h3>
<h4 id="manifests">manifests</h4>
<ul>
<li>今回はServiceやIngressを指定しないためPod数の増減となります</li>
<li>canary へのtraffic shift が分かりやすいように <code>.spec.replicas</code> は <code>5</code> とします</li>
<li>
<p>今回は以下のようなstepでcanary traffic への割り振りを行います</p>
<table>
<thead>
<tr>
<th align="left">#</th>
<th align="left">step</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">0</td>
<td align="left">20%のtrafficをcanaryに割り振る</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">60sec pause</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">80%のtrafficをcanaryに割り振る</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">60sec pause</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">100%のtrafficをcanaryに割り振る</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">canary を stable に切り替え</td>
</tr>
</tbody>
</table>
<p><details><summary>argo-rollouts/nginx.yaml</summary>
<div class="highlight"><pre><span></span><code>---
apiVersion: v1
kind: ConfigMap
metadata:
  name: rollout-test-canary-nginx-conf
data:
  nginx.conf: |
    user nginx;
    worker_processes  1;
    error_log  /var/log/nginx/error.log;
    events {
      worker_connections  1024;
    }
    http {
      server {
          listen       80;
          server_name  _;

          location / {
              root   html;
              index  index.html index.htm;
          }

          location /nginx_status {
              stub_status on;
              access_log off;
              allow 127.0.0.1;
              deny all;
          }

      }
    }

---
apiVersion: argoproj.io/v1alpha1
kind: Rollout
metadata:
  name: rollout-test-canary-nginx
spec:
  strategy:
    canary:
      steps:
      - setWeight: 20
      - pause: {duration: 60}
      - setWeight: 80
      - pause: {duration: 60}
  selector:
    matchLabels:
      app: nginx
  replicas: 5
  template:
    metadata:
      annotations:
        prometheus.io/scrape: 'true'
        prometheus.io/port: '9113'
      labels:
        app: nginx
    spec:
      volumes:
      - name: nginx-conf
        configMap:
          name: rollout-test-canary-nginx-conf
          items:
            - key: nginx.conf
              path: nginx.conf
      containers:
      - name: nginx
        image: nginx:1.14.1
        ports:
        - containerPort: 80
        volumeMounts:
        - mountPath: /etc/nginx/nginx.conf
          readOnly: true
          name: nginx-conf
          subPath: nginx.conf
      - name: nginx-exporter
        image: nginx/nginx-prometheus-exporter:0.11.0
        args:
          - -nginx.scrape-uri=http://localhost/nginx_status
        ports:
          - containerPort: 9113
</code></pre></div>
</details></p>
</li>
</ul>
<h4 id="deploy">初回deploy</h4>
<ol>
<li>
<p>deploy後の起動確認
    <details><summary>list</summary>
<div class="highlight"><pre><span></span><code>$ kubectl argo rollouts list rollouts
NAME                STRATEGY   STATUS        STEP  SET-WEIGHT  READY  DESIRED  UP-TO-DATE  AVAILABLE
rollout-test-canary-nginx  Canary     Healthy       4/4   100         5/5    5        5           5
</code></pre></div>
</details></p>
<p><details><summary>get</summary>
<div class="highlight"><pre><span></span><code>$ kubectl argo rollouts get rollout rollout-test-canary-nginx
Name:            rollout-test-canary-nginx
Namespace:       default
Status:          ✔ Healthy
Strategy:        Canary
  Step:          4/4
  SetWeight:     100
  ActualWeight:  100
Images:          nginx/nginx-prometheus-exporter:0.11.0 (stable)
                 nginx:1.14.1 (stable)
Replicas:
  Desired:       5
  Current:       5
  Updated:       5
  Ready:         5
  Available:     5

NAME                                            KIND        STATUS     AGE    INFO
⟳ rollout-test-canary-nginx                            Rollout     ✔ Healthy  2m58s
└──# revision:1
   └──⧉ rollout-test-canary-nginx-598c9cf7c8           ReplicaSet  ✔ Healthy  2m58s  stable
      ├──□ rollout-test-canary-nginx-598c9cf7c8-47h6s  Pod         ✔ Running  2m58s  ready:2/2
      ├──□ rollout-test-canary-nginx-598c9cf7c8-dkq5v  Pod         ✔ Running  2m58s  ready:2/2
      ├──□ rollout-test-canary-nginx-598c9cf7c8-ph8pf  Pod         ✔ Running  2m58s  ready:2/2
      ├──□ rollout-test-canary-nginx-598c9cf7c8-pw8md  Pod         ✔ Running  2m58s  ready:2/2
      └──□ rollout-test-canary-nginx-598c9cf7c8-rqbr5  Pod         ✔ Running  2m58s  ready:2/2
</code></pre></div>
</details></p>
</li>
</ol>
<h4 id="2deploy">2回目のdeploy</h4>
<ol>
<li><code>nginx:1.14.2</code> へbump upしてdeploy</li>
<li>
<p><code>kubectl argo rollouts get rollout rollout-test-canary-nginx -w</code> で状態遷移を確認
    <details><summary>0. 20%のtrafficをcanaryに割り振る</summary>
<div class="highlight"><pre><span></span><code>Name:            rollout-test-canary-nginx
Namespace:       default
Status:          ◌ Progressing
Message:         more replicas need to be updated
Strategy:        Canary
  Step:          0/4
  SetWeight:     20
  ActualWeight:  0
Images:          nginx/nginx-prometheus-exporter:0.11.0 (canary, stable)
                 nginx:1.14.1 (stable)
                 nginx:1.14.2 (canary)
Replicas:
  Desired:       5
  Current:       5
  Updated:       1
  Ready:         4
  Available:     4

NAME                                            KIND        STATUS         AGE    INFO
⟳ rollout-test-canary-nginx                            Rollout     ◌ Progressing  4m57s
├──# revision:2
│  └──⧉ rollout-test-canary-nginx-bc478cd89            ReplicaSet  ◌ Progressing  7s     canary
│     └──□ rollout-test-canary-nginx-bc478cd89-w7clb   Pod         ✔ Running      6s     ready:2/2
└──# revision:1
   └──⧉ rollout-test-canary-nginx-598c9cf7c8           ReplicaSet  ✔ Healthy      4m57s  stable
      ├──□ rollout-test-canary-nginx-598c9cf7c8-dkq5v  Pod         ✔ Running      4m57s  ready:2/2
      ├──□ rollout-test-canary-nginx-598c9cf7c8-ph8pf  Pod         ✔ Running      4m57s  ready:2/2
      ├──□ rollout-test-canary-nginx-598c9cf7c8-pw8md  Pod         ✔ Running      4m57s  ready:2/2
      └──□ rollout-test-canary-nginx-598c9cf7c8-rqbr5  Pod         ✔ Running      4m57s  ready:2/2
</code></pre></div>
</details></p>
<p><details><summary>1. 60sec pause</summary>
<div class="highlight"><pre><span></span><code>Name:            rollout-test-canary-nginx
Namespace:       default
Status:          ॥ Paused
Message:         CanaryPauseStep
Strategy:        Canary
  Step:          1/4
  SetWeight:     20
  ActualWeight:  20
Images:          nginx/nginx-prometheus-exporter:0.11.0 (canary, stable)
                 nginx:1.14.1 (stable)
                 nginx:1.14.2 (canary)
Replicas:
  Desired:       5
  Current:       5
  Updated:       1
  Ready:         5
  Available:     5

NAME                                            KIND        STATUS     AGE    INFO
⟳ rollout-test-canary-nginx                            Rollout     ॥ Paused   4m57s
├──# revision:2
│  └──⧉ rollout-test-canary-nginx-bc478cd89            ReplicaSet  ✔ Healthy  7s     canary
│     └──□ rollout-test-canary-nginx-bc478cd89-w7clb   Pod         ✔ Running  6s     ready:2/2
└──# revision:1
   └──⧉ rollout-test-canary-nginx-598c9cf7c8           ReplicaSet  ✔ Healthy  4m57s  stable
      ├──□ rollout-test-canary-nginx-598c9cf7c8-dkq5v  Pod         ✔ Running  4m57s  ready:2/2
      ├──□ rollout-test-canary-nginx-598c9cf7c8-ph8pf  Pod         ✔ Running  4m57s  ready:2/2
      ├──□ rollout-test-canary-nginx-598c9cf7c8-pw8md  Pod         ✔ Running  4m57s  ready:2/2
      └──□ rollout-test-canary-nginx-598c9cf7c8-rqbr5  Pod         ✔ Running  4m57s  ready:2/2
</code></pre></div>
</details></p>
<p><details><summary>2. 80%のtrafficをcanaryに割り振る</summary>
<div class="highlight"><pre><span></span><code>Name:            rollout-test-canary-nginx
Namespace:       default
Status:          ◌ Progressing
Message:         more replicas need to be updated
Strategy:        Canary
  Step:          2/4
  SetWeight:     80
  ActualWeight:  25
Images:          nginx/nginx-prometheus-exporter:0.11.0 (canary, stable)
                 nginx:1.14.1 (stable)
                 nginx:1.14.2 (canary)
Replicas:
  Desired:       5
  Current:       4
  Updated:       1
  Ready:         4
  Available:     4

NAME                                            KIND        STATUS               AGE    INFO
⟳ rollout-test-canary-nginx                            Rollout     ◌ Progressing        5m57s
├──# revision:2
│  └──⧉ rollout-test-canary-nginx-bc478cd89            ReplicaSet  ◌ Progressing        67s    canary
│     ├──□ rollout-test-canary-nginx-bc478cd89-w7clb   Pod         ✔ Running            66s    ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-9dcqt   Pod         ◌ Pending            0s     ready:0/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-cgf6w   Pod         ◌ ContainerCreating  0s     ready:0/2
│     └──□ rollout-test-canary-nginx-bc478cd89-hjlrp   Pod         ◌ Pending            0s     ready:0/2
└──# revision:1
   └──⧉ rollout-test-canary-nginx-598c9cf7c8           ReplicaSet  ✔ Healthy            5m57s  stable
      ├──□ rollout-test-canary-nginx-598c9cf7c8-dkq5v  Pod         ✔ Running            5m57s  ready:2/2
      ├──□ rollout-test-canary-nginx-598c9cf7c8-ph8pf  Pod         ✔ Running            5m57s  ready:2/2
      ├──□ rollout-test-canary-nginx-598c9cf7c8-pw8md  Pod         ◌ Terminating        5m57s  ready:2/2
      └──□ rollout-test-canary-nginx-598c9cf7c8-rqbr5  Pod         ✔ Running            5m57s  ready:2/2
</code></pre></div>
</details></p>
<p><details><summary>3. 60sec pause</summary>
<div class="highlight"><pre><span></span><code>Name:            rollout-test-canary-nginx
Namespace:       default
Status:          ॥ Paused
Message:         CanaryPauseStep
Strategy:        Canary
  Step:          3/4
  SetWeight:     80
  ActualWeight:  80
Images:          nginx/nginx-prometheus-exporter:0.11.0 (canary, stable)
                 nginx:1.14.1 (stable)
                 nginx:1.14.2 (canary)
Replicas:
  Desired:       5
  Current:       5
  Updated:       4
  Ready:         5
  Available:     5

NAME                                            KIND        STATUS         AGE    INFO
⟳ rollout-test-canary-nginx                            Rollout     ॥ Paused       6m14s
├──# revision:2
│  └──⧉ rollout-test-canary-nginx-bc478cd89            ReplicaSet  ✔ Healthy      84s    canary
│     ├──□ rollout-test-canary-nginx-bc478cd89-w7clb   Pod         ✔ Running      83s    ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-9dcqt   Pod         ✔ Running      17s    ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-cgf6w   Pod         ✔ Running      17s    ready:2/2
│     └──□ rollout-test-canary-nginx-bc478cd89-hjlrp   Pod         ✔ Running      17s    ready:2/2
└──# revision:1
   └──⧉ rollout-test-canary-nginx-598c9cf7c8           ReplicaSet  ✔ Healthy      6m14s  stable
      ├──□ rollout-test-canary-nginx-598c9cf7c8-dkq5v  Pod         ✔ Running      6m14s  ready:2/2
      ├──□ rollout-test-canary-nginx-598c9cf7c8-ph8pf  Pod         ◌ Terminating  6m14s  ready:2/2
      └──□ rollout-test-canary-nginx-598c9cf7c8-rqbr5  Pod         ◌ Terminating  6m14s  ready:2/2
</code></pre></div>
</details></p>
<p><details><summary>4. 100%のtrafficをcanaryに割り振る</summary>
<div class="highlight"><pre><span></span><code>Name:            rollout-test-canary-nginx
Namespace:       default
Status:          ◌ Progressing
Message:         more replicas need to be updated
Strategy:        Canary
  Step:          4/4
  SetWeight:     100
  ActualWeight:  100
Images:          nginx/nginx-prometheus-exporter:0.11.0 (canary, stable)
                 nginx:1.14.1 (stable)
                 nginx:1.14.2 (canary)
Replicas:
  Desired:       5
  Current:       5
  Updated:       4
  Ready:         5
  Available:     5

NAME                                            KIND        STATUS         AGE    INFO
⟳ rollout-test-canary-nginx                            Rollout     ◌ Progressing  7m13s
├──# revision:2
│  └──⧉ rollout-test-canary-nginx-bc478cd89            ReplicaSet  ◌ Progressing  2m23s  canary
│     ├──□ rollout-test-canary-nginx-bc478cd89-w7clb   Pod         ✔ Running      2m22s  ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-9dcqt   Pod         ✔ Running      76s    ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-cgf6w   Pod         ✔ Running      76s    ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-hjlrp   Pod         ✔ Running      76s    ready:2/2
│     └──□ rollout-test-canary-nginx-bc478cd89-ct9xs   Pod         ◌ Pending      0s     ready:0/2
└──# revision:1
   └──⧉ rollout-test-canary-nginx-598c9cf7c8           ReplicaSet  • ScaledDown   7m13s  stable
      └──□ rollout-test-canary-nginx-598c9cf7c8-dkq5v  Pod         ◌ Terminating  7m13s  ready:2/2


snip...


Name:            rollout-test-canary-nginx
Namespace:       default
Status:          ◌ Progressing
Message:         updated replicas are still becoming available
Strategy:        Canary
  Step:          4/4
  SetWeight:     100
  ActualWeight:  100
Images:          nginx/nginx-prometheus-exporter:0.11.0 (canary)
                 nginx:1.14.2 (canary)
Replicas:
  Desired:       5
  Current:       5
  Updated:       5
  Ready:         4
  Available:     4

NAME                                           KIND        STATUS         AGE    INFO
⟳ rollout-test-canary-nginx                           Rollout     ◌ Progressing  7m22s
├──# revision:2
│  └──⧉ rollout-test-canary-nginx-bc478cd89           ReplicaSet  ◌ Progressing  2m32s  canary
│     ├──□ rollout-test-canary-nginx-bc478cd89-w7clb  Pod         ✔ Running      2m31s  ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-9dcqt  Pod         ✔ Running      85s    ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-cgf6w  Pod         ✔ Running      85s    ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-hjlrp  Pod         ✔ Running      85s    ready:2/2
│     └──□ rollout-test-canary-nginx-bc478cd89-ct9xs  Pod         ✔ Running      9s     ready:2/2
└──# revision:1
   └──⧉ rollout-test-canary-nginx-598c9cf7c8          ReplicaSet  • ScaledDown   7m22s  stable
</code></pre></div>
</details></p>
<p><details><summary>5. canary を stable に切り替え</summary>
<div class="highlight"><pre><span></span><code>Name:            rollout-test-canary-nginx
Namespace:       default
Status:          ✔ Healthy
Strategy:        Canary
  Step:          4/4
  SetWeight:     100
  ActualWeight:  100
Images:          nginx/nginx-prometheus-exporter:0.11.0 (stable)
                 nginx:1.14.2 (stable)
Replicas:
  Desired:       5
  Current:       5
  Updated:       5
  Ready:         5
  Available:     5

NAME                                           KIND        STATUS        AGE    INFO
⟳ rollout-test-canary-nginx                           Rollout     ✔ Healthy     7m23s
├──# revision:2
│  └──⧉ rollout-test-canary-nginx-bc478cd89           ReplicaSet  ✔ Healthy     2m33s  stable
│     ├──□ rollout-test-canary-nginx-bc478cd89-w7clb  Pod         ✔ Running     2m32s  ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-9dcqt  Pod         ✔ Running     86s    ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-cgf6w  Pod         ✔ Running     86s    ready:2/2
│     ├──□ rollout-test-canary-nginx-bc478cd89-hjlrp  Pod         ✔ Running     86s    ready:2/2
│     └──□ rollout-test-canary-nginx-bc478cd89-ct9xs  Pod         ✔ Running     10s    ready:2/2
└──# revision:1
   └──⧉ rollout-test-canary-nginx-598c9cf7c8          ReplicaSet  • ScaledDown  7m23s
</code></pre></div>
</details></p>
</li>
</ol>
<hr/>
<h3 id="bluegreen">blue/green</h3>
<h4 id="manifests_1">manifests</h4>
<ul>
<li>
<p>Argo Rolloutの <code>blue/green</code> はServiceからtraffic routingするReplicaSetを切り替えることで実現します。
  そのため、<code>Service</code>も併せて作成します。</p>
<p><details><summary>argo-rollouts/nginx_blue-green.yaml</summary>
<div class="highlight"><pre><span></span><code>---
apiVersion: v1
kind: ConfigMap
metadata:
  name: rollout-test-bluegreen-nginx-conf
data:
  nginx.conf: |
    user nginx;
    worker_processes  1;
    error_log  /var/log/nginx/error.log;
    events {
      worker_connections  1024;
    }
    http {
      server {
          listen       80;
          server_name  _;

          location / {
              root   html;
              index  index.html index.htm;
          }

          location /nginx_status {
              stub_status on;
              access_log off;
              allow 127.0.0.1;
              deny all;
          }

      }
    }

---
kind: Service
apiVersion: v1
metadata:
  name: rollout-test-bluegreen-active
spec:
  selector:
    app: rollout-test-bluegreen-nginx
  ports:
  - protocol: TCP
    port: 80
    targetPort: 80

---
kind: Service
apiVersion: v1
metadata:
  name: rollout-test-bluegreen-preview
spec:
  selector:
    app: rollout-test-bluegreen-nginx
  ports:
  - protocol: TCP
    port: 80
    targetPort: 80

---
apiVersion: argoproj.io/v1alpha1
kind: Rollout
metadata:
  name: rollout-test-bluegreen-nginx
spec:
  strategy:
    blueGreen:
      activeService: rollout-test-bluegreen-active
      previewService: rollout-test-bluegreen-preview

  selector:
    matchLabels:
      app: rollout-test-bluegreen-nginx
  replicas: 5
  template:
    metadata:
      annotations:
        prometheus.io/scrape: 'true'
        prometheus.io/port: '9113'
      labels:
        app: rollout-test-bluegreen-nginx
    spec:
      volumes:
      - name: nginx-conf
        configMap:
          name: rollout-test-bluegreen-nginx-conf
          items:
            - key: nginx.conf
              path: nginx.conf
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80
        volumeMounts:
        - mountPath: /etc/nginx/nginx.conf
          readOnly: true
          name: nginx-conf
          subPath: nginx.conf
      - name: nginx-exporter
        image: nginx/nginx-prometheus-exporter:0.11.0
        args:
          - -nginx.scrape-uri=http://localhost/nginx_status
        ports:
          - containerPort: 9113
</code></pre></div>
</details></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul>
<li><code>Service</code>よりも先に<code>Rollout</code>が作成された場合、以下のように<code>Degraded</code>となりますので注意が必要です<ul>
<li><code>Rollout</code> よりも先に <code>Service</code> を作成する</li>
<li>同じmanifestsファイルに記載する場合、上から順にリソースを作成していくため記載順も注意すること</li>
<li><a href="https://kubernetes.io/docs/concepts/cluster-administration/manage-deployment/">https://kubernetes.io/docs/concepts/cluster-administration/manage-deployment/</a><blockquote>
<p>The resources will be created in the order they appear in the file. Therefore, it's best to specify the service first, since that will ensure the scheduler can spread the pods associated with the service as they are created by the controller(s), such as Deployment.</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code>$ kubectl argo rollouts get rollout rollout-test-bluegreen-nginx
Name:            rollout-test-bluegreen-nginx
Namespace:       default
Status:          ✖ Degraded
Message:         InvalidSpec: The Rollout "rollout-test-bluegreen-nginx" is invalid: spec.strategy.blueGreen.activeService: Invalid value: "rollout-test-bluegreen-active": service "rollout-test-bl
uegreen-active" not found
Strategy:        BlueGreen
Replicas:
  Desired:       5
  Current:       0
  Updated:       0
  Ready:         0
  Available:     0
</code></pre></div>
</div>
</li>
</ul>
<h4 id="deploy_1">初回deploy</h4>
<ol>
<li>
<p>deploy後の起動確認
    <details><summary>get</summary>
<div class="highlight"><pre><span></span><code>$ kubectl argo rollouts get rollout rollout-test-bluegreen-nginx
Name:            rollout-test-bluegreen-nginx
Namespace:       default
Status:          ✔ Healthy
Strategy:        BlueGreen
Images:          nginx/nginx-prometheus-exporter:0.11.0 (stable, active)
                 nginx:1.14.1 (stable, active)
Replicas:
  Desired:       5
  Current:       5
  Updated:       5
  Ready:         5
  Available:     5

NAME                                                      KIND        STATUS     AGE  INFO
⟳ rollout-test-bluegreen-nginx                            Rollout     ✔ Healthy  16s
└──# revision:1
   └──⧉ rollout-test-bluegreen-nginx-5bb9dbdb65           ReplicaSet  ✔ Healthy  16s  stable,active
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-6rpsr  Pod         ✔ Running  15s  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9jcz9  Pod         ✔ Running  15s  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9v7vb  Pod         ✔ Running  15s  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-gg6kv  Pod         ✔ Running  15s  ready:2/2
      └──□ rollout-test-bluegreen-nginx-5bb9dbdb65-s87hs  Pod         ✔ Running  15s  ready:2/2
</code></pre></div>
</details></p>
<p><details><summary>Service</summary>
<div class="highlight"><pre><span></span><code>$ kubectl get service
NAME                             TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)          AGE

snip...

rollout-test-bluegreen-active    ClusterIP   10.32.0.33    &lt;none&gt;        80/TCP           46s
rollout-test-bluegreen-preview   ClusterIP   10.32.0.253   &lt;none&gt;        80/TCP           46s
</code></pre></div>
</details></p>
</li>
</ol>
<h4 id="2deploy_1">2回目のdeploy</h4>
<ol>
<li><code>nginx:1.14.2</code> へbump upしてdeploy</li>
<li>
<p><code>kubectl argo rollouts get rollout rollout-test-bluegreen-nginx -w</code> で状態遷移を確認
    <details><summary>1. 新しいReplicaSetが作成され、Podが起動する</summary>
<div class="highlight"><pre><span></span><code>Name:            rollout-test-bluegreen-nginx
Namespace:       default
Status:          ◌ Progressing
Message:         active service cutover pending
Strategy:        BlueGreen
Images:          nginx/nginx-prometheus-exporter:0.11.0 (active, preview, stable)
                 nginx:1.14.1 (stable, active)
                 nginx:1.14.2 (preview)
Replicas:
  Desired:       5
  Current:       10
  Updated:       5
  Ready:         5
  Available:     5

NAME                                                      KIND        STATUS         AGE  INFO
⟳ rollout-test-bluegreen-nginx                            Rollout     ◌ Progressing  14m
├──# revision:2
│  └──⧉ rollout-test-bluegreen-nginx-559fd99986           ReplicaSet  ◌ Progressing  13s  preview
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-4kr6t  Pod         ✔ Running      13s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-jbgnb  Pod         ✔ Running      13s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-pzpdn  Pod         ✔ Running      13s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-9p276  Pod         ✔ Running      12s  ready:2/2
│     └──□ rollout-test-bluegreen-nginx-559fd99986-n87x2  Pod         ✔ Running      12s  ready:2/2
└──# revision:1
   └──⧉ rollout-test-bluegreen-nginx-5bb9dbdb65           ReplicaSet  ✔ Healthy      14m  stable,active
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-6rpsr  Pod         ✔ Running      14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9jcz9  Pod         ✔ Running      14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9v7vb  Pod         ✔ Running      14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-gg6kv  Pod         ✔ Running      14m  ready:2/2
      └──□ rollout-test-bluegreen-nginx-5bb9dbdb65-s87hs  Pod         ✔ Running      14m  ready:2/2
</code></pre></div>
</details></p>
<p><details><summary>2. active serviceが新しいReplicaSetに向き、古いReplicaSetがscale downするまでscaleDownDelaySeconds` sec(default: 30) delay</summary>
<div class="highlight"><pre><span></span><code>Name:            rollout-test-bluegreen-nginx
Namespace:       default
Status:          ✔ Healthy
Strategy:        BlueGreen
Images:          nginx/nginx-prometheus-exporter:0.11.0 (active, stable)
                 nginx:1.14.1
                 nginx:1.14.2 (stable, active)
Replicas:
  Desired:       5
  Current:       10
  Updated:       5
  Ready:         5
  Available:     5

NAME                                                      KIND        STATUS     AGE  INFO
⟳ rollout-test-bluegreen-nginx                            Rollout     ✔ Healthy  14m
├──# revision:2
│  └──⧉ rollout-test-bluegreen-nginx-559fd99986           ReplicaSet  ✔ Healthy  14s  stable,active
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-4kr6t  Pod         ✔ Running  14s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-jbgnb  Pod         ✔ Running  14s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-pzpdn  Pod         ✔ Running  14s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-9p276  Pod         ✔ Running  13s  ready:2/2
│     └──□ rollout-test-bluegreen-nginx-559fd99986-n87x2  Pod         ✔ Running  13s  ready:2/2
└──# revision:1
   └──⧉ rollout-test-bluegreen-nginx-5bb9dbdb65           ReplicaSet  ✔ Healthy  14m  delay:28s
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-6rpsr  Pod         ✔ Running  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9jcz9  Pod         ✔ Running  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9v7vb  Pod         ✔ Running  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-gg6kv  Pod         ✔ Running  14m  ready:2/2
      └──□ rollout-test-bluegreen-nginx-5bb9dbdb65-s87hs  Pod         ✔ Running  14m  ready:2/2


Name:            rollout-test-bluegreen-nginx
Namespace:       default
Status:          ✔ Healthy
Strategy:        BlueGreen
Images:          nginx/nginx-prometheus-exporter:0.11.0 (active, stable)
                 nginx:1.14.1
                 nginx:1.14.2 (stable, active)
Replicas:
  Desired:       5
  Current:       10
  Updated:       5
  Ready:         5
  Available:     5

NAME                                                      KIND        STATUS     AGE  INFO
⟳ rollout-test-bluegreen-nginx                            Rollout     ✔ Healthy  14m
├──# revision:2
│  └──⧉ rollout-test-bluegreen-nginx-559fd99986           ReplicaSet  ✔ Healthy  42s  stable,active
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-4kr6t  Pod         ✔ Running  42s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-jbgnb  Pod         ✔ Running  42s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-pzpdn  Pod         ✔ Running  42s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-9p276  Pod         ✔ Running  41s  ready:2/2
│     └──□ rollout-test-bluegreen-nginx-559fd99986-n87x2  Pod         ✔ Running  41s  ready:2/2
└──# revision:1
   └──⧉ rollout-test-bluegreen-nginx-5bb9dbdb65           ReplicaSet  ✔ Healthy  14m  delay:0s
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-6rpsr  Pod         ✔ Running  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9jcz9  Pod         ✔ Running  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9v7vb  Pod         ✔ Running  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-gg6kv  Pod         ✔ Running  14m  ready:2/2
      └──□ rollout-test-bluegreen-nginx-5bb9dbdb65-s87hs  Pod         ✔ Running  14m  ready:2/2
</code></pre></div>
</details></p>
<p><details><summary>4. <code>scaleDownDelaySeconds</code> secが経過</summary>
<div class="highlight"><pre><span></span><code>Name:            rollout-test-bluegreen-nginx
Namespace:       default
Status:          ✔ Healthy
Strategy:        BlueGreen
Images:          nginx/nginx-prometheus-exporter:0.11.0 (active, stable)
                 nginx:1.14.1
                 nginx:1.14.2 (stable, active)
Replicas:
  Desired:       5
  Current:       10
  Updated:       5
  Ready:         5
  Available:     5

NAME                                                      KIND        STATUS     AGE  INFO
⟳ rollout-test-bluegreen-nginx                            Rollout     ✔ Healthy  14m
├──# revision:2
│  └──⧉ rollout-test-bluegreen-nginx-559fd99986           ReplicaSet  ✔ Healthy  43s  stable,active
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-4kr6t  Pod         ✔ Running  43s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-jbgnb  Pod         ✔ Running  43s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-pzpdn  Pod         ✔ Running  43s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-9p276  Pod         ✔ Running  42s  ready:2/2
│     └──□ rollout-test-bluegreen-nginx-559fd99986-n87x2  Pod         ✔ Running  42s  ready:2/2
└──# revision:1
   └──⧉ rollout-test-bluegreen-nginx-5bb9dbdb65           ReplicaSet  ✔ Healthy  14m  delay:passed
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-6rpsr  Pod         ✔ Running  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9jcz9  Pod         ✔ Running  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9v7vb  Pod         ✔ Running  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-gg6kv  Pod         ✔ Running  14m  ready:2/2
      └──□ rollout-test-bluegreen-nginx-5bb9dbdb65-s87hs  Pod         ✔ Running  14m  ready:2/2
</code></pre></div>
</details></p>
<p><details><summary>5. 古いReplicaSetがscale downする</summary>
<div class="highlight"><pre><span></span><code>Name:            rollout-test-bluegreen-nginx
Namespace:       default
Status:          ✔ Healthy
Strategy:        BlueGreen
Images:          nginx/nginx-prometheus-exporter:0.11.0 (stable, active)
                 nginx:1.14.2 (stable, active)
Replicas:
  Desired:       5
  Current:       10
  Updated:       5
  Ready:         5
  Available:     5

NAME                                                      KIND        STATUS         AGE  INFO
⟳ rollout-test-bluegreen-nginx                            Rollout     ✔ Healthy      14m
├──# revision:2
│  └──⧉ rollout-test-bluegreen-nginx-559fd99986           ReplicaSet  ✔ Healthy      43s  stable,active
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-4kr6t  Pod         ✔ Running      43s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-jbgnb  Pod         ✔ Running      43s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-pzpdn  Pod         ✔ Running      43s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-9p276  Pod         ✔ Running      42s  ready:2/2
│     └──□ rollout-test-bluegreen-nginx-559fd99986-n87x2  Pod         ✔ Running      42s  ready:2/2
└──# revision:1
   └──⧉ rollout-test-bluegreen-nginx-5bb9dbdb65           ReplicaSet  • ScaledDown   14m
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-6rpsr  Pod         ◌ Terminating  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9jcz9  Pod         ◌ Terminating  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-9v7vb  Pod         ◌ Terminating  14m  ready:2/2
      ├──□ rollout-test-bluegreen-nginx-5bb9dbdb65-gg6kv  Pod         ◌ Terminating  14m  ready:2/2
      └──□ rollout-test-bluegreen-nginx-5bb9dbdb65-s87hs  Pod         ◌ Terminating  14m  ready:2/2
</code></pre></div>
</details></p>
<p><details><summary>6. 古いReplicaSetのscale downが完了</summary>
<div class="highlight"><pre><span></span><code>Name:            rollout-test-bluegreen-nginx
Namespace:       default
Status:          ✔ Healthy
Strategy:        BlueGreen
Images:          nginx/nginx-prometheus-exporter:0.11.0 (stable, active)
                 nginx:1.14.2 (stable, active)
Replicas:
  Desired:       5
  Current:       5
  Updated:       5
  Ready:         5
  Available:     5

NAME                                                      KIND        STATUS        AGE  INFO
⟳ rollout-test-bluegreen-nginx                            Rollout     ✔ Healthy     14m
├──# revision:2
│  └──⧉ rollout-test-bluegreen-nginx-559fd99986           ReplicaSet  ✔ Healthy     52s  stable,active
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-4kr6t  Pod         ✔ Running     52s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-jbgnb  Pod         ✔ Running     52s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-pzpdn  Pod         ✔ Running     52s  ready:2/2
│     ├──□ rollout-test-bluegreen-nginx-559fd99986-9p276  Pod         ✔ Running     51s  ready:2/2
│     └──□ rollout-test-bluegreen-nginx-559fd99986-n87x2  Pod         ✔ Running     51s  ready:2/2
└──# revision:1
   └──⧉ rollout-test-bluegreen-nginx-5bb9dbdb65           ReplicaSet  • ScaledDown  14m
</code></pre></div>
</details></p>
</li>
</ol>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="" class="md-footer__inner md-grid">
<a class="md-footer__link md-footer__link--prev" href="../install/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Install
            </div>
</div>
</a>
<a class="md-footer__link md-footer__link--next" href="../../../keda/about_keda/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              About KEDA
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
        with emoji by
        <a href="https://github.com/twitter/twemoji" rel="noopener" target="_blank">
          Twemoji
        </a>
</div>
<div class="md-social">
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../../assets/javascripts/bundle.ce72ebac.min.js"></script>
<script src="../../../../assets/pymdownx-extras/extra-loader-52693605.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>